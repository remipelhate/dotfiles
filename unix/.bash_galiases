# Variables
# -----------
RED='\033[0;31m'
GREEN='\033[0;32m'
BLUE='\e[1;34m'
RC='\e[0m'

# Update aliases
# ----------------
function galias() {
    if [[ $@ == "update" ]]; then
        sudo curl https://raw.githubusercontent.com/remipelhate/dotfiles/master/unix/.bash_galiases -o ~/.bash_galiases
        printf "${GREEN}Your global aliases have been updated.${RC}\n"
        brel
    fi
}

# Notes
# ---------
# Some of these aliases require a symlink to subl. Check
# http://ashleynolan.co.uk/blog/launching-sublime-from-the-terminal
# for more info.

alias bp="edit ~/.bash_profile"
alias brc="edit ~/.bashrc"

function brel() {
    printf "${BLUE}Reloading bash profile...${RC}\n"
    source ~/.bash_profile 
}


# Artisan
# ---------
alias seed="php artisan db:seed"
alias routes="php artisan routes"

function artisan() {
    if [[ $@ == "refresh" ]]; then
        command composer dump
        command php artisan clear-compiled
        command php artisan optimize
    else
        command php artisan "$@"
    fi
}

function migrate() {
    if [[ $@ == "refresh" ]]; then
        command php artisan migrate:refresh --seed
    else
        command php artisan migrate":$@"
    fi
}

# Directories
# -------------
alias ls="ls --color=auto"
alias lsl="ls --color=auto -l"
alias lal="ls --color -lah" # List all, with human readable filesizes
alias ..="cd .."
alias ...="cd ../.."
alias ....="cd ../../.."
alias .....="cd ../../../.."

# General
# ---------
alias c="clear"

# Vagrant
# ---------
alias v="vagrant version && vagrant global-status"
alias vst="vagrant status"
alias vup="vagrant up"
alias vdo="vagrant halt"
alias vssh="vagrant ssh"
alias vkill="vagrant destroy"

# Virtual hosts
# ---------------
alias vhost="edit /etc/hosts"

# Helpers
# ---------
function edit() {
    if [ -f $1 ];
        then openInEditor $1
    elif [[ -d $1 ]];
        then openInEditor $1
    else
        printf "${RED}The file '$1' does not exist...${RC}\n"
    fi
}

function openInEditor() {
    if which sublime &> /dev/null; then
        printf "${BLUE}Opening '$1' with Sublime Text...${RC}\n"

        if [ -w $1 ];
            then command sublime $1
        else
            command sudo sublime $1
        fi
    else
        if [ -w $1 ];
            then command nano $1
        else
            command sudo nano $1
        fi
    fi
}